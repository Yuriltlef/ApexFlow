import{_ as M,r as w,a as N,H as S,o as R,c as v,e as c,f as o,w as s,i as U,G as L,k as f,A as j,B as H,C as O,D as W,v as F,p as u,t as d,al as G,E as K,l as b,am as Q,F as J,K as X,d as x,L as Y,M as Z,R as ee,S as te,g as ae,ab as oe}from"./index-Ck2FL_5i.js";/* empty css                *//* empty css                      *//* empty css                        */import{e as E}from"./warehouse-iFvdmTwp.js";const le={class:"warehouse-inout-page"},se={class:"table-actions"},ne={key:0,class:"data-stat"},re={class:"stat-item"},pe={key:0,class:"stat-item"},ie={class:"highlight-text"},ce=["innerHTML"],ue={class:"pagination-container"},de={__name:"WarehouseInOut",setup(ge){const h=w(!1),i=w([]),l=N({page:1,pageSize:10,productId:"",changeType:""}),I=async()=>{h.value=!0;try{const e=await E({page:1,pageSize:1});if(e&&e.success){const n=e.data.totalCount||0;if(n>0){const p=await E({page:1,pageSize:n});p&&p.success?(i.value=p.data.logs||[],L.success(`æˆåŠŸåŠ è½½ ${i.value.length} æ¡è®°å½•`)):i.value=[]}else i.value=[]}}catch(t){console.error(t),L.error("èŽ·å–æ—¥å¿—å¤±è´¥"),i.value=[]}finally{h.value=!1}},m=S(()=>{let t=i.value;if(l.productId){const e=String(l.productId).toLowerCase();t=t.filter(n=>String(n.productId).toLowerCase().includes(e))}return l.changeType&&(t=t.filter(e=>e.changeType===l.changeType)),t}),z=S(()=>{const t=(l.page-1)*l.pageSize,e=t+l.pageSize;return m.value.slice(t,e)}),T=()=>{l.page=1},k=t=>{if(!t)return"";const e=String(t),n=l.productId;if(!n)return e;const g=new RegExp(`(${n})`,"gi");return e.replace(g,'<span style="color: #f56c6c; font-weight: bold;">$1</span>')},C=t=>{if(!t)return"-";if(Array.isArray(t)){const[e,n,g,p,y]=t,_=r=>r<10?"0"+r:r;return`${e}-${_(n)}-${_(g)} ${_(p)}:${_(y)}`}return String(t).replace("T"," ")},V=t=>({purchase:"success",sale:"primary",adjust:"warning"})[t]||"info",$=t=>({purchase:"é‡‡è´­å…¥åº“",sale:"é”€å”®å‡ºåº“",adjust:"ç›˜ç‚¹è°ƒæ•´"})[t]||t;return R(()=>{I()}),(t,e)=>{const n=K,g=Y,p=te,y=ee,_=ae,r=W,B=F,D=O,P=X,q=U,A=J;return f(),v("div",le,[e[7]||(e[7]=c("h2",null,"ðŸ“‹ å‡ºå…¥åº“è®°å½•",-1)),o(q,{shadow:"never"},{header:s(()=>[c("div",se,[o(g,{modelValue:l.productId,"onUpdate:modelValue":e[0]||(e[0]=a=>l.productId=a),placeholder:"è¾“å…¥å•†å“IDæœç´¢",style:{width:"200px","margin-right":"10px"},clearable:"",onInput:T},{prefix:s(()=>[o(n,null,{default:s(()=>[o(b(Z))]),_:1})]),_:1},8,["modelValue"]),o(y,{modelValue:l.changeType,"onUpdate:modelValue":e[1]||(e[1]=a=>l.changeType=a),placeholder:"å˜æ›´ç±»åž‹",clearable:"",style:{width:"150px","margin-right":"10px"},onChange:T},{default:s(()=>[o(p,{label:"å…¨éƒ¨",value:""}),o(p,{label:"é‡‡è´­å…¥åº“",value:"purchase"}),o(p,{label:"é”€å”®å‡ºåº“",value:"sale"}),o(p,{label:"ç›˜ç‚¹è°ƒæ•´",value:"adjust"})]),_:1},8,["modelValue"]),o(_,{type:"primary",onClick:I},{default:s(()=>[o(n,{style:{"margin-right":"5px"}},{default:s(()=>[o(b(oe))]),_:1}),e[4]||(e[4]=u(" åˆ·æ–°æ•°æ® ",-1))]),_:1}),i.value.length>0?(f(),v("div",ne,[c("span",re,[e[5]||(e[5]=u("æ€»è®°å½•: ",-1)),c("strong",null,d(i.value.length),1)]),l.productId||l.changeType?(f(),v("span",pe,[e[6]||(e[6]=u(" ç­›é€‰ç»“æžœ: ",-1)),c("strong",ie,d(m.value.length),1)])):x("",!0)])):x("",!0)])]),default:s(()=>[j((f(),H(D,{data:z.value,stripe:"",style:{width:"100%"}},{default:s(()=>[o(r,{prop:"id",label:"æ—¥å¿—ID",width:"80"}),o(r,{prop:"productId",label:"å•†å“ID",width:"100"},{default:s(({row:a})=>[c("span",{innerHTML:k(a.productId)},null,8,ce)]),_:1}),o(r,{prop:"changeType",label:"å˜æ›´ç±»åž‹",width:"120"},{default:s(({row:a})=>[o(B,{type:V(a.changeType)},{default:s(()=>[u(d($(a.changeType)),1)]),_:2},1032,["type"])]),_:1}),o(r,{prop:"quantity",label:"å˜åŠ¨æ•°é‡",width:"120"},{default:s(({row:a})=>[c("span",{style:G({color:a.quantity>0?"#67c23a":"#f56c6c",fontWeight:"bold"})},d(a.quantity>0?"+"+a.quantity:a.quantity),5)]),_:1}),o(r,{label:"åº“å­˜å˜åŒ–",width:"150"},{default:s(({row:a})=>[u(d(a.beforeStock)+" ",1),o(n,null,{default:s(()=>[o(b(Q))]),_:1}),u(" "+d(a.afterStock),1)]),_:1}),o(r,{prop:"orderId",label:"å…³è”å•å·",width:"180"},{default:s(({row:a})=>[u(d(a.orderId||"-"),1)]),_:1}),o(r,{prop:"createdAt",label:"æ“ä½œæ—¶é—´","min-width":"160"},{default:s(({row:a})=>[u(d(C(a.createdAt)),1)]),_:1})]),_:1},8,["data"])),[[A,h.value]]),c("div",ue,[o(P,{"current-page":l.page,"onUpdate:currentPage":e[2]||(e[2]=a=>l.page=a),"page-size":l.pageSize,"onUpdate:pageSize":e[3]||(e[3]=a=>l.pageSize=a),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",total:m.value.length},null,8,["current-page","page-size","total"])])]),_:1})])}}},ve=M(de,[["__scopeId","data-v-662b6c38"]]);export{ve as default};
