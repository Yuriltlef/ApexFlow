import{bP as se,d as L,X as Ie,bY as j,ad as ye,a7 as Le,aP as We,bZ as De,j as q,C as le,B as Y,l as Ne,z as ce,ah as ue,D as G,r as T,q as P,aT as K,G as D,bv as oe,af as _e,c as Ce,M as Te,u as O,o as Se,n as He,H as Ee,aC as Z,b_ as Ke,b$ as Ue,c0 as me,bs as je,a as y,E as X,$ as Xe,Z as Ye,aA as re,aB as A,bO as Ze,ax as qe,R as Ge,a6 as ie,bH as Je,an as we,S as Pe,V as Qe,bB as et,c1 as pe,aK as tt,c2 as at,ay as nt,az as st,a0 as lt,a8 as ot}from"./index-BN3Z-84l.js";import{h as rt,r as it,o as ct}from"./el-checkbox-CTrio7Vw.js";import{a as V,c as ut}from"./strings-DC5fadkc.js";const dt=(e,c,u)=>Le(e.subTree).filter(n=>{var N;return We(n)&&((N=n.type)==null?void 0:N.name)===c&&!!n.component}).map(n=>n.component.uid).map(n=>u[n]).filter(n=>!!n),vt=(e,c)=>{const u=se({}),f=se([]),t=new WeakMap,n=d=>{u.value[d.uid]=d,j(u),ye(()=>{const v=d.getVnode().el,o=v.parentNode;if(!t.has(o)){t.set(o,[]);const a=o.insertBefore.bind(o);o.insertBefore=(_,s)=>(t.get(o).some(E=>_===E||s===E)&&j(u),a(_,s))}t.get(o).push(v)})},N=d=>{delete u.value[d.uid],j(u);const v=d.getVnode().el,o=v.parentNode,a=t.get(o),_=a.indexOf(v);a.splice(_,1)},m=()=>{f.value=dt(e,c,u.value)},p=d=>d.render(),h=L({setup(d,{slots:v}){return()=>(m(),v.default?Ie(p,{render:v.default}):null)}});return{children:f,addChild:n,removeChild:N,ChildrenSorter:h}},bt="horizontal",ft="vertical",ht={[bt]:"deltaX",[ft]:"deltaY"},mt=({atEndEdge:e,atStartEdge:c,layout:u},f)=>{let t,n=0;const N=p=>p<0&&c.value||p>0&&e.value;return{hasReachedEdge:N,onWheel:p=>{rt(t);const h=p[ht[u.value]];N(n)&&N(n+h)||(n+=h,De()||p.preventDefault(),t=it(()=>{f(n),n=0}))}}},J=Symbol("tabsRootContextKey"),pt=q({tabs:{type:Y(Array),default:()=>le([])},tabRefs:{type:Y(Object),default:()=>le({})}}),Re="ElTabBar",gt=L({name:Re}),yt=L({...gt,props:pt,setup(e,{expose:c}){const u=e,f=ce(J);f||ue(Re,"<el-tabs><el-tab-bar /></el-tabs>");const t=G("tabs"),n=T(),N=T(),m=P(()=>{var a;return K(f.props.defaultValue)||!!((a=N.value)!=null&&a.transform)}),p=()=>{let a=0,_=0;const s=["top","bottom"].includes(f.props.tabPosition)?"width":"height",$=s==="width"?"x":"y",E=$==="x"?"left":"top";return u.tabs.every(w=>{if(K(w.paneName))return!1;const l=u.tabRefs[w.paneName];if(!l)return!1;if(!w.active)return!0;a=l[`offset${V(E)}`],_=l[`client${V(s)}`];const C=window.getComputedStyle(l);return s==="width"&&(_-=Number.parseFloat(C.paddingLeft)+Number.parseFloat(C.paddingRight),a+=Number.parseFloat(C.paddingLeft)),!1}),{[s]:`${_}px`,transform:`translate${V($)}(${a}px)`}},h=()=>N.value=p(),d=[],v=()=>{d.forEach(a=>a.stop()),d.length=0,Object.values(u.tabRefs).forEach(a=>{d.push(oe(a,h))})};D(()=>u.tabs,async()=>{await Z(),h(),v()},{immediate:!0});const o=oe(n,()=>h());return _e(()=>{d.forEach(a=>a.stop()),d.length=0,o.stop()}),c({ref:n,update:h}),(a,_)=>O(m)?(Se(),Ce("div",{key:0,ref_key:"barRef",ref:n,class:Ee([O(t).e("active-bar"),O(t).is(O(f).props.tabPosition)]),style:He(N.value)},null,6)):Te("v-if",!0)}});var Nt=Ne(yt,[["__file","tab-bar.vue"]]);const _t=q({panes:{type:Y(Array),default:()=>le([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean,tabindex:{type:[String,Number],default:void 0}}),Ct={tabClick:(e,c,u)=>u instanceof Event,tabRemove:(e,c)=>c instanceof Event},ge="ElTabNav",Tt=L({name:ge,props:_t,emits:Ct,setup(e,{expose:c,emit:u}){const f=ce(J);f||ue(ge,"<el-tabs><tab-nav /></el-tabs>");const t=G("tabs"),n=Ke(),N=Ue(),m=T(),p=T(),h=T(),d=T({}),v=T(),o=T(!1),a=T(0),_=T(!1),s=T(!0),$=se(),E=P(()=>["top","bottom"].includes(f.props.tabPosition)),w=P(()=>E.value?"width":"height"),l=P(()=>({transform:`translate${w.value==="width"?"X":"Y"}(-${a.value}px)`})),{width:C,height:R}=me(m),{width:F,height:W}=me(p,{width:0,height:0},{box:"border-box"}),H=P(()=>E.value?C.value:R.value),M=P(()=>E.value?F.value:W.value),{onWheel:I}=mt({atStartEdge:P(()=>a.value<=0),atEndEdge:P(()=>M.value-a.value<=H.value),layout:P(()=>E.value?"horizontal":"vertical")},r=>{a.value=ut(a.value+r,0,M.value-H.value)}),Q=()=>{if(!m.value)return;const r=m.value[`offset${V(w.value)}`],g=a.value;if(!g)return;const i=g>r?g-r:0;a.value=i},Be=()=>{if(!m.value||!p.value)return;const r=p.value[`offset${V(w.value)}`],g=m.value[`offset${V(w.value)}`],i=a.value;if(r-i<=g)return;const b=r-i>g*2?i+g:r-g;a.value=b},de=async()=>{const r=p.value;if(!o.value||!h.value||!m.value||!r)return;await Z();const g=d.value[e.currentName];if(!g)return;const i=m.value,b=g.getBoundingClientRect(),S=i.getBoundingClientRect(),x=E.value?r.offsetWidth-S.width:r.offsetHeight-S.height,k=a.value;let B=k;E.value?(b.left<S.left&&(B=k-(S.left-b.left)),b.right>S.right&&(B=k+b.right-S.right)):(b.top<S.top&&(B=k-(S.top-b.top)),b.bottom>S.bottom&&(B=k+(b.bottom-S.bottom))),B=Math.max(B,0),a.value=Math.min(B,x)},ve=()=>{var r;if(!p.value||!m.value)return;e.stretch&&((r=v.value)==null||r.update());const g=p.value[`offset${V(w.value)}`],i=m.value[`offset${V(w.value)}`],b=a.value;i<g?(o.value=o.value||{},o.value.prev=b,o.value.next=b+i<g,g-b<i&&(a.value=g-i)):(o.value=!1,b>0&&(a.value=0))},Oe=r=>{const g=re(r);let i=0;switch(g){case A.left:case A.up:i=-1;break;case A.right:case A.down:i=1;break;default:return}const b=Array.from(r.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let x=b.indexOf(r.target)+i;x<0?x=b.length-1:x>=b.length&&(x=0),b[x].focus({preventScroll:!0}),b[x].click(),be()},be=()=>{s.value&&(_.value=!0)},ee=()=>_.value=!1,ke=(r,g)=>{d.value[g]=r},ze=async()=>{await Z();const r=d.value[e.currentName];r?.focus({preventScroll:!0})};return D(n,r=>{r==="hidden"?s.value=!1:r==="visible"&&setTimeout(()=>s.value=!0,50)}),D(N,r=>{r?setTimeout(()=>s.value=!0,50):s.value=!1}),oe(h,ve),ye(()=>setTimeout(()=>de(),0)),je(()=>ve()),c({scrollToActiveTab:de,removeFocus:ee,focusActiveTab:ze,tabListRef:p,tabBarRef:v,scheduleRender:()=>j($)}),()=>{const r=o.value?[y("span",{class:[t.e("nav-prev"),t.is("disabled",!o.value.prev)],onClick:Q},[y(X,null,{default:()=>[y(Xe,null,null)]})]),y("span",{class:[t.e("nav-next"),t.is("disabled",!o.value.next)],onClick:Be},[y(X,null,{default:()=>[y(Ye,null,null)]})])]:null,g=e.panes.map((i,b)=>{var S,x,k,B,fe;const Ae=i.uid,te=i.props.disabled,U=(x=(S=i.props.name)!=null?S:i.index)!=null?x:`${b}`,ae=!te&&(i.isClosable||i.props.closable!==!1&&e.editable);i.index=`${b}`;const Ve=ae?y(X,{class:"is-icon-close",onClick:z=>u("tabRemove",i,z)},{default:()=>[y(Ze,null,null)]}):null,Fe=((B=(k=i.slots).label)==null?void 0:B.call(k))||i.props.label,Me=!te&&i.active?(fe=e.tabindex)!=null?fe:f.props.tabindex:-1;return y("div",{ref:z=>ke(z,U),class:[t.e("item"),t.is(f.props.tabPosition),t.is("active",i.active),t.is("disabled",te),t.is("closable",ae),t.is("focus",_.value)],id:`tab-${U}`,key:`tab-${Ae}`,"aria-controls":`pane-${U}`,role:"tab","aria-selected":i.active,tabindex:Me,onFocus:()=>be(),onBlur:()=>ee(),onClick:z=>{ee(),u("tabClick",i,U,z)},onKeydown:z=>{const he=re(z);ae&&(he===A.delete||he===A.backspace)&&u("tabRemove",i,z)}},[Fe,Ve])});return $.value,y("div",{ref:h,class:[t.e("nav-wrap"),t.is("scrollable",!!o.value),t.is(f.props.tabPosition)]},[r,y("div",{class:t.e("nav-scroll"),ref:m},[e.panes.length>0?y("div",{class:[t.e("nav"),t.is(f.props.tabPosition),t.is("stretch",e.stretch&&["top","bottom"].includes(f.props.tabPosition))],ref:p,style:l.value,role:"tablist",onKeydown:Oe,onWheel:I},[e.type?null:y(Nt,{ref:v,tabs:[...e.panes],tabRefs:d.value},null),g]):null])])}}}),St=q({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},defaultValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Y(Function),default:()=>!0},stretch:Boolean,tabindex:{type:[String,Number],default:0}}),ne=e=>qe(e)||Ge(e),Et={[we]:e=>ne(e),tabClick:(e,c)=>c instanceof Event,tabChange:e=>ne(e),edit:(e,c)=>["remove","add"].includes(c),tabRemove:e=>ne(e),tabAdd:()=>!0},wt=L({name:"ElTabs",props:St,emits:Et,setup(e,{emit:c,slots:u,expose:f}){var t;const n=G("tabs"),N=P(()=>["left","right"].includes(e.tabPosition)),{children:m,addChild:p,removeChild:h,ChildrenSorter:d}=vt(Pe(),"ElTabPane"),v=T(),o=T((t=K(e.modelValue)?e.defaultValue:e.modelValue)!=null?t:"0"),a=async(l,C=!1)=>{var R,F,W,H;if(!(o.value===l||K(l)))try{let M;if(e.beforeLeave){const I=e.beforeLeave(l,o.value);M=I instanceof Promise?await I:I}else M=!0;if(M!==!1){const I=(R=m.value.find(Q=>Q.paneName===o.value))==null?void 0:R.isFocusInsidePane();o.value=l,C&&(c(we,l),c("tabChange",l)),(W=(F=v.value)==null?void 0:F.removeFocus)==null||W.call(F),I&&((H=v.value)==null||H.focusActiveTab())}}catch{}},_=(l,C,R)=>{l.props.disabled||(c("tabClick",l,R),a(C,!0))},s=(l,C)=>{l.props.disabled||K(l.props.name)||(C.stopPropagation(),c("edit",l.props.name,"remove"),c("tabRemove",l.props.name))},$=()=>{c("edit",void 0,"add"),c("tabAdd")},E=l=>{const C=re(l);[A.enter,A.numpadEnter].includes(C)&&$()},w=l=>{const C=l.el.firstChild,R=["bottom","right"].includes(e.tabPosition)?l.children[0].el:l.children[1].el;C!==R&&C.before(R)};return D(()=>e.modelValue,l=>a(l)),D(o,async()=>{var l;await Z(),(l=v.value)==null||l.scrollToActiveTab()}),Qe(J,{props:e,currentName:o,registerPane:p,unregisterPane:h,nav$:v}),f({currentName:o,get tabNavRef(){return ct(v.value,["scheduleRender"])}}),()=>{const l=u["add-icon"],C=e.editable||e.addable?y("div",{class:[n.e("new-tab"),N.value&&n.e("new-tab-vertical")],tabindex:e.tabindex,onClick:$,onKeydown:E},[l?ie(u,"add-icon"):y(X,{class:n.is("icon-plus")},{default:()=>[y(Je,null,null)]})]):null,R=()=>y(Tt,{ref:v,currentName:o.value,editable:e.editable,type:e.type,panes:m.value,stretch:e.stretch,onTabClick:_,onTabRemove:s},null),F=y("div",{class:[n.e("header"),N.value&&n.e("header-vertical"),n.is(e.tabPosition)]},[y(d,null,{default:R,$stable:!0}),C]),W=y("div",{class:n.e("content")},[ie(u,"default")]);return y("div",{class:[n.b(),n.m(e.tabPosition),{[n.m("card")]:e.type==="card",[n.m("border-card")]:e.type==="border-card"}],onVnodeMounted:w,onVnodeUpdated:w},[W,F])}}});var Pt=wt;const Rt=q({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),xe="ElTabPane",xt=L({name:xe}),$t=L({...xt,props:Rt,setup(e){const c=e,u=Pe(),f=et(),t=ce(J);t||ue(xe,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const n=G("tab-pane"),N=T(),m=T(),p=P(()=>{var s;return(s=c.closable)!=null?s:t.props.closable}),h=pe(()=>{var s;return t.currentName.value===((s=c.name)!=null?s:m.value)}),d=T(h.value),v=P(()=>{var s;return(s=c.name)!=null?s:m.value}),o=pe(()=>!c.lazy||d.value||h.value),a=()=>{var s;return(s=N.value)==null?void 0:s.contains(document.activeElement)};D(h,s=>{s&&(d.value=!0)});const _=tt({uid:u.uid,getVnode:()=>u.vnode,slots:f,props:c,paneName:v,active:h,index:m,isClosable:p,isFocusInsidePane:a});return t.registerPane(_),_e(()=>{t.unregisterPane(_)}),at(()=>{var s;f.label&&((s=t.nav$.value)==null||s.scheduleRender())}),(s,$)=>O(o)?nt((Se(),Ce("div",{key:0,id:`pane-${O(v)}`,ref_key:"paneRef",ref:N,class:Ee(O(n).b()),role:"tabpanel","aria-hidden":!O(h),"aria-labelledby":`tab-${O(v)}`},[ie(s.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[st,O(h)]]):Te("v-if",!0)}});var $e=Ne($t,[["__file","tab-pane.vue"]]);const zt=lt(Pt,{TabPane:$e}),At=ot($e);export{zt as E,At as a};
